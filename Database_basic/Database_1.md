> 데이터 베이스_1
1. 데이터 베이스란?
2. 데이터 모델링이란?
3. 예시 데이터 베이스 이해
4. 데이터베이스 네이밍 규칙
5. 유일키란?
6. 복합키란?
7. 외래키란?

> 1. 데이터 베이스란?
- 데이터 베이스 : 공유하여 사용할 목적으로 `체계화하여 관리하는 데이터의 집합`
    - 관겨형 데이터(RDB)
        - 각 테이블관의 관계가 있다.
        - 스키마가 존재한다.
        - 구족으로 안정적이나 유연하지못하다
        - MySQL, MariaDB
    - 비관계형 데이터 베이스(NoSQL)
        - 각 테이블 간 관계 X
        - 스키마 X
        - 유연성을 가지고 있으나 구조 결정이 어려움

- `상황과 조건에 맞춰 적절한 데이터 베이스를 선택해야한다.`


> 2. 데이터모델링 이란?
- 효율족으로 데이터 베이스를 구축하기 위해 데이터베이스의 `뼈대를 세우는 작업`
    - 예) 매달 생일마다 쿠폰을준다 -> 필요한 feature :  이름 나이 생일 쿠폰 
- 요구사항 정리
    - 데이터가 어떠한 형태, 어떤 목적을 가지고 있는지 정리
- 개념적 데이터 모델 설계
    - `핵심 개체`를 갖고, `각 개체간의 관계를` 정리 
        - 예) 회원 Table : 이름 나이 생일 쿠폰, 상품Table : 상품일련번호, 상품가격
- 논리적 데이터 모델 설계
    - 실제 데이터베이스로 구현하기 위한 모델링
        - 규칙을 명확하게
        - 관계형 DB의 feature 설정
        - 유일키, 복합키, 외래키 등등 설정!
- 물리적 데이터 설계
    - 데이터가 어떻게 컴퓨터에 저장될지 설계

> 3. 예시 데이터 베이스 설계법
- 야심찬 람쥐다의 사업 계획
- 공유 자전거 사업

1. 사업을 운영하기 위해 어떠한 정보들이 필요할까?
    - 자전거를 관리하기 위한 정보
    - 고객을 관리하기 위한 정보
    - 대여기록을 관리하기위한 정보 등등

2. 자전거 정보, 대여 정보, 고객정보
    - 누가 어떤 자전거를 빌렸는지에 대하여 공통 정보들이 존재한다.
    - 즉, 관계가 존재한다는 의미이다.
    - 관계형 RDB를 사용하자
---
3. 1. 자전거 운영 방침 대여 : `자전거`
    - 원활한 대여 관리를 위해 대여 정보는 대여한 자전거의 ID, 대여한 고객의 ID, 대여한 기간 날짜로 구성
    - 대여한 자전거의 ID는 실제 운영하고 있는 자전거 ID(영문+숫자 조합으로 3자리)만 입력 가능함.
    - 대여한 고객의 ID는 실제 가입한 고객의 ID(영문+숫자 조헙으로 15자리 미만)만 입력
    - 대여한 일자는 년-월-일-시-분(YYYY-MM-DD HH:MM)으로 입력되며 고객은 자전거는 대여후 1분 이내 다시 대여할 수 없다. 단, 고객이 대여할 수 있는 자전거의 대수에는 제한이 없다.

|구분|타입|예시|
|---|---|---|
|자전거 ID|문자형|E01|
|자전거의 종류|문자형|A|
|자전거의 이미지|문자형|https://e10img...|
|자전거 연식|숫자형|2019|

3. 2. 자전거 운영 방침 대여 : `고객`
    - 고객 관리를 위한 고객은 ID,이름,전화번호를 가지고 있다.
    - 고객ID는 영문+숫자로 조합되며 길이는 15자 미만으로 구성되고 또한 ID는 중복이 되거나 수정 될 수 없다.
    - 고객의 이름은 10자미만의 한글로 구성되어 있으며 동명이인을 고려하여 중복이 가능하다.
    - 고객의 전화번호는 15자 미만의 문자로 구성되어 있다.
    - 대여중인 자전가가 없어야 회원탈퇴가 가능하다.
|구분|타입|예시|
|---|---|---|
|고객 ID|문자형|ramg_tori|
|이름|문자형|람쥐토리|
|전화번호|문자형|010-1234-5678|

> 4. 데이터베이스 네이밍 규칙
- 유지보수와 의미의 명확성을 전달하기 위해 `네이밍 규칙`을 설정
- **공통규칙**
    1. 줄임말 사용은 `최소화한다`.(단,사용할 경우 범용적으로 사용되는 줄임말을 사용한다.)
    - b_image -> bicycle_image
    - tb_bicycleboardinfo(info -> information)

    2. 테이블 네이밍 규칙
    - 테이블 명을 작성할 때는 파스칼 기법을 사용한다.
        - bicycle_rental -> BicycleRental
        - customer_info -> CustomerInfo
    - 테이블,뷰(View)임을 한눈에 확인할 수 있도록 테이블 명 앞에는 `tb_`,`v_`를 붙인다.
        - tb_BicycleRental(자전거 대여와 관련된 테이블), V_CustomerInfo(데이터 분석을 위해 필요한 정보만을 모아둔 가상 테이블)
    - 속성 네이밍 규칙
        1. 속성명을 작성할때는 스네이크 표기법을 사용한다.
            - customID -> customer_id, CustomerTel->cutomer_tel
        2. 유일키,외래키 등은 한눈에 알아 볼 수 있도록 속성명사 앞에 `pk_`,`fk_`를 붙인다.
            (단 중복으로 설정되어 있는 경우 외래키 > 유일키 순으로 작성한다.)
            - pk_bicycle_id / fk_pk_customer_id

    

- 자전거 공유 운영 방침 : 대여

|구분|타입|예시|
|---|---|---|
|대여 일자|varchar(20)|rental_date|
|대여한 고객ID|varchar(15)|customer_id|
|대여한 자전거 ID|varchar(5)|bicycle_id|

- `varchar` : 문자형 타입을 의미하여 뒤에 `괄호 안에 해당 문자열의 크기(byte)를 의미`(영문자 기준 1글자 당 1byte를 사용), 한글의 경우 한 글자당 2byte가 필요하다.

|구분|타입|예시|
|---|---|---|
|자전거 ID|varchar(5)|bicycle_date|
|자전거 종류|varchar(5)|bicycle_id|
|자전거 이미지|varchar(50)|bicycle_id|
|자전거 연식|int|bicycle_id|

- int : `정수형 타입을 의미`하여 varchar 와 달리 `괄호로 크기를 작성해 주지 않음`


> 05.유일키란?
- 키(key)
    - 데이터베이스에서 튜플(레코드,행) 간 구분을 위한 값(속성)
        - 유일키, 복합키, 외래키 등 `다양한 종류가 존재`
- 유일키(Primary Key)
    - 테이블에서 `튜플(레코드, 행)을 구분`지어주는 `고유 식별 값(속성)`
        - 유일키 값은 중복 될 수 없으며, NULL값 또한 불가능
    - 유일키(Primary Key) 선정하기
        - 필요한 정보들을 담고 있는 자전거 대여 테이블
        - 누가 자전거를 빌려 갔는지 중요하며 중복이 되지 않는 `고객ID`로 선택

- 유일키 선언하기
```sql
CREATE TALBLE '테이블명'{
    `속성명` 타입,
    ...
    PRIMARY KEY(`유일키로 사용할 속성명`)
} 
```

```sql
CREATE TABLE `tb_KickboardRental` (
 `pk_customer_id` VARCHAR(15),
 `rental_date` VARCHAR(20),
 `customer_name` VARCHAR(20),
 `customer_tel` VARCHAR(15),
 `kickboard_id` VARCHAR(5),
 `kickboard_kind` VARCHAR(5),
 `kickboard_image` VARCHAR(50),
 `kickboard_year` INT,
 -- 지시사항 1번을 참고하여 기본키를 설정하세요.
 PRIMARY KEY(`pk_customer_id`)
);

INSERT INTO tb_KickboardRental VALUES ('elice_rabbit', '2020-10-01 11:00', '엘리스 토끼', '010-1234-5678', 'E01', 'A','https://...', '2019');
INSERT INTO tb_KickboardRental VALUES ('hatseller', '2020-10-02 12:00', '모자장수', '010-2222-3333', 'E01', 'A','https://...', '2019');
INSERT INTO tb_KickboardRental VALUES ('dodo_bird', '2020-10-03 13:00', '도도새', '010-3333-4444', 'E02', 'B','https://...', '2020');
```

> 06. 복합키(Composite Key)
- `두개 이상의 속성을 활용`하여 튜플(레코드,행)을 구분지어주는 방법
- `누가 언제` 자전거를 빌려 갔는지 중요하기 떄문에 `대여일자를 추가하여 복합키를 구성`
- `처음 동일하게 고객 ID가 중복되지만` `또 다른 속성인 대여 일자가 달라 서로 다른 행`으로 처리
```sql
CREATE TABLE '테이블명'{
    `속성명` 타입,
    `속성명2` 타입,
    ...
    PRIMARY KEY(`복합키로 사용할 속성명`,`복합키로 사용할 속성 명`)
}
```

```sql
CREATE TABLE `tb_KickboardRental` (
 `pk_rental_date` VARCHAR(20),
 `pk_customer_id` VARCHAR(15),
 `customer_name` VARCHAR(20),
 `customer_tel` VARCHAR(15),
 `kickboard_id` VARCHAR(5),
 `kickboard_kind` VARCHAR(5),
 `kickboard_image` VARCHAR(50),
 `kickboard_year` INT,
 -- 지시사항 1번을 참고하여 복합키를 설정하세요.
    PRIMARY KEY(`pk_customer_ID`,`pk_rental_date`)
);

 -- tb_KickboardRental 테이블에 데이터 추가
INSERT INTO tb_KickboardRental VALUES ('2020-10-01 11:00', 'elice_rabbit', '엘리스 토끼', '010-1234-5678', 'E01', 'A','https://...', '2019');
INSERT INTO tb_KickboardRental VALUES ('2020-10-02 12:00', 'hatseller', '모자장수', '010-2222-3333', 'E01', 'A','https://...', '2019');
INSERT INTO tb_KickboardRental VALUES ('2020-10-03 13:00', 'dodo_bird', '도도새', '010-3333-4444', 'E02', 'B','https://...', '2020');
INSERT INTO tb_KickboardRental VALUES ('2020-10-04 15:00', 'elice_rabbit', '엘리스 토끼', '010-1234-5678', 'E01', 'A','https://...', '2019');
```

> 07. 외래키(Foreign Key)란?
- 실제 존재하지 않는 데이터가 추가되어 추후 관리하는데 문제발생을 막아준다.
- 다른 테이블의 키와 연결해주는 키이며, ***참조의 무결성***을 유지하기 위해 활용된다.
    - ***참조의 무결성*** : `외래키 값`이 참조 중인 테이블의 값과 `일관성을 가지는 것을 의미`
- 자전거 대여 태이블의 고객 ID + 고객 테이블
    - 고객의 ID에 대해 따로 테이블을 구성, 고객 테이블의 '고객ID'속성을 참조하는 외래키 구성
    - 새로 추가하려는 행 중 `외래키인 '고객ID'의 고객 테이블에 있지 않은 내용이므로` 추가 되지 않음
```sql
CREATE TABLE '테이블명'{
    '속성명' 타입,
    '속성명2 타입,
    ...
    FOREIGN KEY('외래키로 사용할 속성 명') REFERENCES '참조하는 속성이 있는 테이블'('참조할 속성명')
}
```